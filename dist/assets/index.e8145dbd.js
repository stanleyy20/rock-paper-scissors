var p=Object.defineProperty;var m=(c,e,i)=>e in c?p(c,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[e]=i;var o=(c,e,i)=>(m(c,typeof e!="symbol"?e+"":e,i),i);const E=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}};E();const _="/rock-paper-scissors/assets/icon-close.55b786af.svg",S="/rock-paper-scissors/assets/icon-lizard.3c893e5e.svg",C="/rock-paper-scissors/assets/icon-paper.90d57903.svg",g="/rock-paper-scissors/assets/icon-rock.e16feca1.svg",O="/rock-paper-scissors/assets/icon-scissors.f778df73.svg",f="/rock-paper-scissors/assets/icon-spock.b919dc37.svg",L={ROCK:"#rock",PAPER:"#paper",SCISSORS:"#scissors",SCORE:"#score",SELECTION_SCREEN:".main",RESULT_SCREEN:".main-second",PLAYER_CHOOSE_CONTAINER:"#player",AI_CHOOSE_CONTAINER:"#ai",WIN_OR_LOSE_TITLE:".main-second__title-h2",RESET_BUTTON:".main-second__btn",RULES_BUTTON:"#rules",POPUP:".popup",CLOSE_POPUP_BUTTON:".close-btn"},T={SELECTION_SCREEN_CLASS_HIDEN:"main--hiden",RESULT_SCREEN_CLASS_HIDEN:"main-second--hiden",POPUP_HIDEN:"popup--hiden"},{PAPER:b,ROCK:N,SCISSORS:P,SCORE:R,SELECTION_SCREEN:y,RESULT_SCREEN:A,PLAYER_CHOOSE_CONTAINER:I,AI_CHOOSE_CONTAINER:B,WIN_OR_LOSE_TITLE:v,RESET_BUTTON:w,RULES_BUTTON:U,POPUP:k,CLOSE_POPUP_BUTTON:D}=L,{SELECTION_SCREEN_CLASS_HIDEN:h,RESULT_SCREEN_CLASS_HIDEN:u,POPUP_HIDEN:H}=T;class F{constructor(){o(this,"rockButton");o(this,"paperButton");o(this,"scissorsButton");o(this,"playAgainButton");o(this,"rulesButton");o(this,"closePopupButton");o(this,"score");o(this,"selectionScreen");o(this,"resultScreen");o(this,"playerChoiceContainer");o(this,"aiChoiceContainer");o(this,"winOrLoseTitle");o(this,"popup");o(this,"initialScore");o(this,"choiceForAI");o(this,"choiceAI");o(this,"playerChoice");o(this,"playerOrAi");this.rockButton=this.bindDomElement(N),this.paperButton=this.bindDomElement(b),this.scissorsButton=this.bindDomElement(P),this.playAgainButton=this.bindDomElement(w),this.rulesButton=this.bindDomElement(U),this.closePopupButton=this.bindDomElement(D),this.score=this.bindDomElement(R),this.selectionScreen=this.bindDomElement(y),this.resultScreen=this.bindDomElement(A),this.playerChoiceContainer=this.bindDomElement(I),this.aiChoiceContainer=this.bindDomElement(B),this.winOrLoseTitle=this.bindDomElement(v),this.popup=this.bindDomElement(k),this.initialScore=Number(localStorage.getItem("score")),this.choiceForAI=["rock","paper","scissors"],this.choiceAI="",this.playerChoice="",this.playerOrAi=!0}bindDomElement(e){return document.querySelector(e)===null?(console.error(`don't find selector ${e}`),null):document.querySelector(e)}renderScore(){return this.score===null?(console.error("score not faund"),null):(this.score.innerText=String(localStorage.getItem("score")||0),this.initialScore=Number(localStorage.getItem("score")),null)}randomChoiceForAI(e){const i=Math.floor(Math.random()*e.length);return this.choiceAI=e[i]}showHide(e,i){return e===null?(console.warn("dont find html element"),null):(e.classList.toggle(i),null)}renderPlayersChoice(e,i,r,t){const s=document.createElement("div"),n=document.createElement("div"),l=document.createElement("img"),a=t?i.target.getAttribute("data-choice"):r,d=new URL(Object.assign({"/public/images/icon-close.svg":_,"/public/images/icon-lizard.svg":S,"/public/images/icon-paper.svg":C,"/public/images/icon-rock.svg":g,"/public/images/icon-scissors.svg":O,"/public/images/icon-spock.svg":f})[`/public/images/icon-${a}.svg`],self.location).href;s.classList.add("main__choose","main__choose--position",`main__choose--${a}`),n.classList.add("main__choose-bg"),l.src=d,s.appendChild(n),n.appendChild(l),e!==null&&e.appendChild(s)}winOrLoseRules(e,i,r,t,s){if(r===null||t===null)return null;const n=e.target.getAttribute("data-choice");return n===i?(r.textContent="DRAW",null):n==="rock"&&i=="paper"||n==="paper"&&i=="scissors"||n==="scissors"&&i=="rock"?(r.textContent="YOU LOSE",localStorage.setItem("score",String(s-3)),null):((n==="rock"&&i=="scissors"||n==="paper"&&i=="rock"||n==="scissors"&&i=="paper")&&(r.textContent="YOU WIN",localStorage.setItem("score",String(s+3))),null)}bindFunctionToGameButton(e,i,r,t,s,n){return e===null?(console.warn("don't find button"),null):(e.addEventListener("click",l=>{i(this.selectionScreen,h),r(this.resultScreen,u),t(l,this.choiceAI,this.winOrLoseTitle,this.score,this.initialScore),s(this.playerChoiceContainer,l,this.choiceAI,this.playerOrAi),n(this.aiChoiceContainer,l,this.choiceAI,!this.playerOrAi)}),null)}bindFunctionToPopUpButton(e,i){e==null||e.addEventListener("click",()=>{i(this.popup,H)})}playAgain(){var e;(e=this.playAgainButton)==null||e.addEventListener("click",()=>{this.playerChoiceContainer!==null&&this.aiChoiceContainer!==null&&(this.playerChoiceContainer.innerText="",this.aiChoiceContainer.innerText=""),this.randomChoiceForAI(this.choiceForAI),this.showHide(this.resultScreen,u),this.showHide(this.selectionScreen,h),this.renderScore()})}initial(){this.randomChoiceForAI(this.choiceForAI),this.playAgain(),this.renderScore(),this.bindFunctionToGameButton(this.rockButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToGameButton(this.paperButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToGameButton(this.scissorsButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToPopUpButton(this.rulesButton,this.showHide),this.bindFunctionToPopUpButton(this.closePopupButton,this.showHide)}run(){this.initial()}}const M=new F;window.addEventListener("DOMContentLoaded",()=>M.run());
