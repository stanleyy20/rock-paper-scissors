var _=Object.defineProperty;var E=(l,e,s)=>e in l?_(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var t=(l,e,s)=>(E(l,typeof e!="symbol"?e+"":e,s),s);const m=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};m();const S="/rock-paper-scissors/assets/icon-close.55b786af.svg",C="/rock-paper-scissors/assets/icon-lizard.3c893e5e.svg",g="/rock-paper-scissors/assets/icon-paper.90d57903.svg",O="/rock-paper-scissors/assets/icon-rock.e16feca1.svg",f="/rock-paper-scissors/assets/icon-scissors.f778df73.svg",L="/rock-paper-scissors/assets/icon-spock.b919dc37.svg",T={ROCK:"#rock",PAPER:"#paper",SCISSORS:"#scissors",SCORE:"#score",SELECTION_SCREEN:".selection-screen",RESULT_SCREEN:".result-screen",PLAYER_CHOOSE_CONTAINER:"#player",AI_CHOOSE_CONTAINER:"#ai",WIN_OR_LOSE_TITLE:".result-screen__title-h2",RESET_BUTTON:".result-screen__btn",RULES_BUTTON:"#rules",POPUP:".popup",CLOSE_POPUP_BUTTON:".close-btn"},b={SELECTION_SCREEN_CLASS_HIDEN:"selection-screen--hiden",RESULT_SCREEN_CLASS_HIDEN:"result-screen--hiden",POPUP_HIDEN:"popup--hiden"},{PAPER:N,ROCK:P,SCISSORS:R,SCORE:A,SELECTION_SCREEN:I,RESULT_SCREEN:y,PLAYER_CHOOSE_CONTAINER:w,AI_CHOOSE_CONTAINER:B,WIN_OR_LOSE_TITLE:v,RESET_BUTTON:U,RULES_BUTTON:k,POPUP:D,CLOSE_POPUP_BUTTON:H}=T,{SELECTION_SCREEN_CLASS_HIDEN:u,RESULT_SCREEN_CLASS_HIDEN:d,POPUP_HIDEN:F}=b;class W{constructor(){t(this,"rockButton");t(this,"paperButton");t(this,"scissorsButton");t(this,"playAgainButton");t(this,"rulesButton");t(this,"closePopupButton");t(this,"score");t(this,"selectionScreen");t(this,"resultScreen");t(this,"playerChoiceContainer");t(this,"aiChoiceContainer");t(this,"winOrLoseTitle");t(this,"popup");t(this,"initialScore");t(this,"choiceForAI");t(this,"choiceAI");t(this,"playerChoice");t(this,"playerOrAi");t(this,"whoWin");this.rockButton=this.bindDomElement(P),this.paperButton=this.bindDomElement(N),this.scissorsButton=this.bindDomElement(R),this.playAgainButton=this.bindDomElement(U),this.rulesButton=this.bindDomElement(k),this.closePopupButton=this.bindDomElement(H),this.score=this.bindDomElement(A),this.selectionScreen=this.bindDomElement(I),this.resultScreen=this.bindDomElement(y),this.playerChoiceContainer=this.bindDomElement(w),this.aiChoiceContainer=this.bindDomElement(B),this.winOrLoseTitle=this.bindDomElement(v),this.popup=this.bindDomElement(D),this.initialScore=Number(localStorage.getItem("score")),this.choiceForAI=["rock","paper","scissors"],this.choiceAI="",this.playerChoice="",this.playerOrAi=!0,this.whoWin=[]}bindDomElement(e){return document.querySelector(e)===null?(console.error(`don't find selector ${e}`),null):document.querySelector(e)}renderScore(){return this.score===null?(console.error("score not faund"),null):(this.score.innerText=String(localStorage.getItem("score")||0),this.initialScore=Number(localStorage.getItem("score")),null)}randomChoiceForAI(e){const s=Math.floor(Math.random()*e.length);return this.choiceAI=e[s]}showHide(e,s){return e===null?(console.warn("dont find html element"),null):(e.classList.toggle(s),null)}renderPlayersChoice(e,s,c,i,o){const n=document.createElement("div"),r=document.createElement("div"),h=document.createElement("img"),a=i?s.target.getAttribute("data-choice"):c,p=new URL(Object.assign({"/public/images/icon-close.svg":S,"/public/images/icon-lizard.svg":C,"/public/images/icon-paper.svg":g,"/public/images/icon-rock.svg":O,"/public/images/icon-scissors.svg":f,"/public/images/icon-spock.svg":L})[`/public/images/icon-${a}.svg`],self.location).href;n.classList.add("selection-screen__choose","selection-screen__choose--position",`selection-screen__choose--${a}`),i||n.classList.add("selection-screen__choose--animation"),(o[0]==="AI"&&!i||o[0]==="PLAYER"&&i)&&n.classList.add("selection-screen__choose--winning"),r.classList.add("selection-screen__choose-bg"),h.src=p,n.appendChild(r),r.appendChild(h),e!==null&&e.appendChild(n)}winOrLoseRules(e,s,c,i,o,n){if(c===null||i===null)return null;const r=e.target.getAttribute("data-choice");return r===s?(c.textContent="DRAW",null):r==="rock"&&s=="paper"||r==="paper"&&s=="scissors"||r==="scissors"&&s=="rock"?(c.textContent="YOU LOSE",localStorage.setItem("score",String(o-3)),n.push("AI"),null):((r==="rock"&&s=="scissors"||r==="paper"&&s=="rock"||r==="scissors"&&s=="paper")&&(c.textContent="YOU WIN",localStorage.setItem("score",String(o+3)),n.push("PLAYER")),null)}bindFunctionToGameButton(e,s,c,i,o,n){return e===null?(console.warn("don't find button"),null):(e.addEventListener("click",r=>{s(this.selectionScreen,u),c(this.resultScreen,d),i(r,this.choiceAI,this.winOrLoseTitle,this.score,this.initialScore,this.whoWin),o(this.playerChoiceContainer,r,this.choiceAI,this.playerOrAi,this.whoWin),n(this.aiChoiceContainer,r,this.choiceAI,!this.playerOrAi,this.whoWin)}),null)}bindFunctionToPopUpButton(e,s){e==null||e.addEventListener("click",()=>{s(this.popup,F)})}playAgain(){var e;(e=this.playAgainButton)==null||e.addEventListener("click",()=>{this.playerChoiceContainer!==null&&this.aiChoiceContainer!==null&&(this.playerChoiceContainer.innerText="",this.aiChoiceContainer.innerText=""),this.randomChoiceForAI(this.choiceForAI),this.showHide(this.resultScreen,d),this.showHide(this.selectionScreen,u),this.renderScore(),this.whoWin.pop()})}initial(){this.randomChoiceForAI(this.choiceForAI),this.playAgain(),this.renderScore(),this.bindFunctionToGameButton(this.rockButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToGameButton(this.paperButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToGameButton(this.scissorsButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToPopUpButton(this.rulesButton,this.showHide),this.bindFunctionToPopUpButton(this.closePopupButton,this.showHide)}run(){this.initial()}}const M=new W;window.addEventListener("DOMContentLoaded",()=>M.run());
