var _=Object.defineProperty;var E=(l,e,s)=>e in l?_(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var o=(l,e,s)=>(E(l,typeof e!="symbol"?e+"":e,s),s);const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerpolicy&&(t.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?t.credentials="include":i.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(i){if(i.ep)return;i.ep=!0;const t=s(i);fetch(i.href,t)}};S();const m="/rock-paper-scissors/assets/icon-close.55b786af.svg",g="/rock-paper-scissors/assets/icon-lizard.3c893e5e.svg",C="/rock-paper-scissors/assets/icon-paper.90d57903.svg",O="/rock-paper-scissors/assets/icon-rock.e16feca1.svg",f="/rock-paper-scissors/assets/icon-scissors.f778df73.svg",L="/rock-paper-scissors/assets/icon-spock.b919dc37.svg",N={GAME_BUTTONS:".selection-screen__choose",SCORE:"#score",SELECTION_SCREEN:".selection-screen",RESULT_SCREEN:".result-screen",PLAYER_CHOOSE_CONTAINER:"#player",AI_CHOOSE_CONTAINER:"#ai",WIN_OR_LOSE_TITLE:".result-screen__title-h2",RESET_BUTTON:".result-screen__btn",RULES_BUTTON:"#rules",POPUP:".popup",CLOSE_POPUP_BUTTON:".close-btn"},T={SELECTION_SCREEN_CLASS_HIDEN:"selection-screen--hiden",SELECTION_SCREEN_CLASS_ANIMATION:"selection-screen--animation",RESULT_SCREEN_CLASS_HIDEN:"result-screen--hiden",POPUP_HIDEN:"popup--hiden"},{GAME_BUTTONS:A,SCORE:I,SELECTION_SCREEN:b,RESULT_SCREEN:R,PLAYER_CHOOSE_CONTAINER:P,AI_CHOOSE_CONTAINER:y,WIN_OR_LOSE_TITLE:U,RESET_BUTTON:v,RULES_BUTTON:w,POPUP:B,CLOSE_POPUP_BUTTON:k}=N,{SELECTION_SCREEN_CLASS_HIDEN:u,RESULT_SCREEN_CLASS_HIDEN:d,POPUP_HIDEN:D}=T;class H{constructor(){o(this,"gameButtons");o(this,"playAgainButton");o(this,"rulesButton");o(this,"closePopupButton");o(this,"score");o(this,"selectionScreen");o(this,"resultScreen");o(this,"playerChoiceContainer");o(this,"aiChoiceContainer");o(this,"winOrLoseTitle");o(this,"popup");o(this,"initialScore");o(this,"choiceForAI");o(this,"choiceAI");o(this,"playerChoice");o(this,"playerOrAi");o(this,"whoWin");this.gameButtons=document.querySelectorAll(A),this.playAgainButton=this.bindDomElement(v),this.rulesButton=this.bindDomElement(w),this.closePopupButton=this.bindDomElement(k),this.score=this.bindDomElement(I),this.selectionScreen=this.bindDomElement(b),this.resultScreen=this.bindDomElement(R),this.playerChoiceContainer=this.bindDomElement(P),this.aiChoiceContainer=this.bindDomElement(y),this.winOrLoseTitle=this.bindDomElement(U),this.popup=this.bindDomElement(B),this.initialScore=Number(localStorage.getItem("score")),this.choiceForAI=["rock","paper","scissors"],this.choiceAI="",this.playerChoice="",this.playerOrAi=!0,this.whoWin=[]}bindDomElement(e){return document.querySelector(e)===null?(console.error(`don't find selector ${e}`),null):document.querySelector(e)}renderScore(){return this.score===null?(console.error("score not faund"),null):(this.score.innerText=String(localStorage.getItem("score")||0),this.initialScore=Number(localStorage.getItem("score")),null)}randomChoiceForAI(e){const s=Math.floor(Math.random()*e.length);return this.choiceAI=e[s]}showHide(e,s){return e===null?(console.warn("dont find html element"),null):(e.classList.toggle(s),null)}renderPlayersChoice(e,s,c,i,t){const n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("img"),h=i?s.target.getAttribute("data-choice"):c,p=new URL(Object.assign({"/public/images/icon-close.svg":m,"/public/images/icon-lizard.svg":g,"/public/images/icon-paper.svg":C,"/public/images/icon-rock.svg":O,"/public/images/icon-scissors.svg":f,"/public/images/icon-spock.svg":L})[`/public/images/icon-${h}.svg`],self.location).href;n.classList.add("selection-screen__choose","selection-screen__choose--position",`selection-screen__choose--${h}`),i||n.classList.add("selection-screen__choose--animation"),(t[0]==="AI"&&!i||t[0]==="PLAYER"&&i)&&n.classList.add("selection-screen__choose--winning"),r.classList.add("selection-screen__choose-bg"),a.src=p,n.appendChild(r),r.appendChild(a),e!==null&&e.appendChild(n)}winOrLoseRules(e,s,c,i,t,n){if(c===null||i===null)return null;const r=e.target.getAttribute("data-choice");return r===s?(c.textContent="DRAW",null):r==="rock"&&s=="paper"||r==="paper"&&s=="scissors"||r==="scissors"&&s=="rock"?(c.textContent="YOU LOSE",localStorage.setItem("score",String(t-3)),n.push("AI"),null):((r==="rock"&&s=="scissors"||r==="paper"&&s=="rock"||r==="scissors"&&s=="paper")&&(c.textContent="YOU WIN",localStorage.setItem("score",String(t+3)),n.push("PLAYER")),null)}bindFunctionToGameButton(e,s,c,i,t,n){return e===null?(console.warn("don't find button"),null):(e.forEach(r=>r.addEventListener("click",a=>{s(this.selectionScreen,u),c(this.resultScreen,d),i(a,this.choiceAI,this.winOrLoseTitle,this.score,this.initialScore,this.whoWin),t(this.playerChoiceContainer,a,this.choiceAI,this.playerOrAi,this.whoWin),n(this.aiChoiceContainer,a,this.choiceAI,!this.playerOrAi,this.whoWin)})),null)}bindFunctionToPopUpButton(e,s){e==null||e.addEventListener("click",()=>{s(this.popup,D)})}playAgain(){var e;(e=this.playAgainButton)==null||e.addEventListener("click",()=>{this.playerChoiceContainer!==null&&this.aiChoiceContainer!==null&&(this.playerChoiceContainer.innerText="",this.aiChoiceContainer.innerText=""),this.randomChoiceForAI(this.choiceForAI),this.showHide(this.resultScreen,d),this.showHide(this.selectionScreen,u),this.renderScore(),this.whoWin.pop()})}resetScore(){var e;(e=this.score)==null||e.addEventListener("click",()=>{localStorage.setItem("score","0"),this.renderScore()})}initial(){this.resetScore(),this.randomChoiceForAI(this.choiceForAI),this.playAgain(),this.renderScore(),this.bindFunctionToGameButton(this.gameButtons,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToPopUpButton(this.rulesButton,this.showHide),this.bindFunctionToPopUpButton(this.closePopupButton,this.showHide)}run(){this.initial()}}const F=new H;window.addEventListener("DOMContentLoaded",()=>F.run());
