var d=Object.defineProperty;var E=(c,e,t)=>e in c?d(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var o=(c,e,t)=>(E(c,typeof e!="symbol"?e+"":e,t),t);const p=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}};p();const m={ROCK:"#rock",PAPER:"#paper",SCISSORS:"#scissors",SCORE:"#score",SELECTION_SCREEN:".main",RESULT_SCREEN:".main-second",PLAYER_CHOOSE_CONTAINER:"#player",AI_CHOOSE_CONTAINER:"#ai",WIN_OR_LOSE_TITLE:".main-second__title-h2",RESET_BUTTON:".main-second__btn",RULES_BUTTON:"#rules",POPUP:".popup",CLOSE_POPUP_BUTTON:".close-btn"},S={SELECTION_SCREEN_CLASS_HIDEN:"main--hiden",RESULT_SCREEN_CLASS_HIDEN:"main-second--hiden",POPUP_HIDEN:"popup--hiden"},{PAPER:C,ROCK:O,SCISSORS:_,SCORE:L,SELECTION_SCREEN:T,RESULT_SCREEN:f,PLAYER_CHOOSE_CONTAINER:N,AI_CHOOSE_CONTAINER:P,WIN_OR_LOSE_TITLE:R,RESET_BUTTON:g,RULES_BUTTON:y,POPUP:A,CLOSE_POPUP_BUTTON:I}=m,{SELECTION_SCREEN_CLASS_HIDEN:a,RESULT_SCREEN_CLASS_HIDEN:u,POPUP_HIDEN:B}=S;class b{constructor(){o(this,"rockButton");o(this,"paperButton");o(this,"scissorsButton");o(this,"playAgainButton");o(this,"rulesButton");o(this,"closePopupButton");o(this,"score");o(this,"selectionScreen");o(this,"resultScreen");o(this,"playerChoiceContainer");o(this,"aiChoiceContainer");o(this,"winOrLoseTitle");o(this,"popup");o(this,"initialScore");o(this,"choiceForAI");o(this,"choiceAI");o(this,"playerChoice");o(this,"playerOrAi");this.rockButton=this.bindDomElement(O),this.paperButton=this.bindDomElement(C),this.scissorsButton=this.bindDomElement(_),this.playAgainButton=this.bindDomElement(g),this.rulesButton=this.bindDomElement(y),this.closePopupButton=this.bindDomElement(I),this.score=this.bindDomElement(L),this.selectionScreen=this.bindDomElement(T),this.resultScreen=this.bindDomElement(f),this.playerChoiceContainer=this.bindDomElement(N),this.aiChoiceContainer=this.bindDomElement(P),this.winOrLoseTitle=this.bindDomElement(R),this.popup=this.bindDomElement(A),this.initialScore=Number(localStorage.getItem("score")),this.choiceForAI=["rock","paper","scissors"],this.choiceAI="",this.playerChoice="",this.playerOrAi=!0}bindDomElement(e){return document.querySelector(e)===null?(console.error(`don't find selector ${e}`),null):document.querySelector(e)}renderScore(){return this.score===null?(console.error("score not faund"),null):(this.score.innerText=String(localStorage.getItem("score")||0),this.initialScore=Number(localStorage.getItem("score")),null)}randomChoiceForAI(e){const t=Math.floor(Math.random()*e.length);return this.choiceAI=e[t]}showHide(e,t){return e===null?(console.warn("dont find html element"),null):(e.classList.toggle(t),null)}renderPlayersChoice(e,t,r,i){const n=document.createElement("div"),s=document.createElement("div"),l=document.createElement("img"),h=i?t.target.getAttribute("data-choice"):r;n.classList.add("main__choose","main__choose--position",`main__choose--${h}`),s.classList.add("main__choose-bg"),l.src=`./public/images/icon-${h}.svg`,n.appendChild(s),s.appendChild(l),e!==null&&e.appendChild(n)}winOrLoseRules(e,t,r,i,n){if(r===null||i===null)return null;const s=e.target.getAttribute("data-choice");return s===t?(r.textContent="DRAW",null):s==="rock"&&t=="paper"||s==="paper"&&t=="scissors"||s==="scissors"&&t=="rock"?(r.textContent="YOU LOSE",localStorage.setItem("score",String(n-3)),null):((s==="rock"&&t=="scissors"||s==="paper"&&t=="rock"||s==="scissors"&&t=="paper")&&(r.textContent="YOU WIN",localStorage.setItem("score",String(n+3))),null)}bindFunctionToGameButton(e,t,r,i,n,s){return e===null?(console.warn("don't find button"),null):(e.addEventListener("click",l=>{t(this.selectionScreen,a),r(this.resultScreen,u),i(l,this.choiceAI,this.winOrLoseTitle,this.score,this.initialScore),n(this.playerChoiceContainer,l,this.choiceAI,this.playerOrAi),s(this.aiChoiceContainer,l,this.choiceAI,!this.playerOrAi)}),null)}bindFunctionToPopUpButton(e,t){e==null||e.addEventListener("click",()=>{t(this.popup,B)})}playAgain(){var e;(e=this.playAgainButton)==null||e.addEventListener("click",()=>{this.playerChoiceContainer!==null&&this.aiChoiceContainer!==null&&(this.playerChoiceContainer.innerText="",this.aiChoiceContainer.innerText=""),this.randomChoiceForAI(this.choiceForAI),this.showHide(this.resultScreen,u),this.showHide(this.selectionScreen,a),this.renderScore()})}initial(){this.randomChoiceForAI(this.choiceForAI),this.playAgain(),this.renderScore(),this.bindFunctionToGameButton(this.rockButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToGameButton(this.paperButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToGameButton(this.scissorsButton,this.showHide,this.showHide,this.winOrLoseRules,this.renderPlayersChoice,this.renderPlayersChoice),this.bindFunctionToPopUpButton(this.rulesButton,this.showHide),this.bindFunctionToPopUpButton(this.closePopupButton,this.showHide)}run(){this.initial()}}const w=new b;window.addEventListener("DOMContentLoaded",()=>w.run());
